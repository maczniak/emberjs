

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ember.js - Routing: Specifying a Route's Model</title>
    <link rel="shortcut icon" href="/images/favicon.png" />
    <!--[if lte IE 7 ]><link href="/stylesheets/fonts/fontello-ie7.css" media="screen" rel="stylesheet" type="text/css" /><![endif]-->
    <link href="/stylesheets/site.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/highlight.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="http://emberjs.com/blog/feed.xml" rel="alternate" type="application/atom+xml" title="Ember.js - Blog" />

    <script type="text/javascript">
      var _gaq = _gaq || [];
      var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
      _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
      _gaq.push(['_setAccount', 'UA-27675533-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

<!--[if lt IE 9]>
    <script type="text/javascript" src="/javascripts/common-old-ie.js"></script>
<![endif]-->
<!--[if gte IE 9]><!-->
    <script type="text/javascript" src="/javascripts/common-modern.js"></script>
<!--<![endif]-->

    
    <script type="text/javascript" src="/javascripts/guides.js"></script>
    <script src="http://static.jsbin.com/js/embed.js"></script>
  
  </head>

  <body class="guides guides_routing guides_routing_specifying-a-routes-model guides_routing_specifying-a-routes-model_index">
    <div id="header">
      <div id="wrapper">
        <a id="logo" href="/">&nbsp;</a>
        <ul id="nav">
          <li><a href="/about">about</a></li>
          <li class="active"><a href="/guides">guides</a></li>
          <li><a href="/api">api</a></li>
          <li><a href="/community">community</a></li>
          <li><a href="/blog">blog</a></li>
          <li><a href="/builds">builds</a></li>
          <li id="search">
            <form>
              <input type="text" id="st-search-input" class="st-search-input" />
            </form>
            <div id="st-results-container"></div>
          </li>
        </ul>

        <div id="github">
          <a href="https://github.com/emberjs/ember.js"><i class="icon-fork"></i>Fork Us!</a>
        </div>
      </div>
    </div>

    <div id="content-wrapper">
      
      
        <div id="sidebar">
          
    <ol id="toc-list">
          <li class="level-1">
            <a href="/guides/getting-started">Getting Started</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/getting-started">Getting Started</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/planning-the-application">Planning The Application</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/creating-a-static-mockup">Creating a Static Mockup</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/obtaining-emberjs-and-dependencies">Obtaining Ember.js and Dependencies</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/adding-a-route-and-template">Adding the First Route and Template</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/modeling-data">Modeling Data</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/using-fixtures">Using Fixtures</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/displaying-model-data">Displaying Model Data</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/displaying-a-models-completeness">Displaying a Model's Complete State</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/creating-a-new-model">Creating a New Model Instance</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/marking-a-model-as-complete-incomplete">Marking a Model as Complete or Incomplete</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/displaying-the-number-of-incomplete-todos">Displaying the Number of Incomplete Todos</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/toggle-todo-editing-state">Toggling between Showing and Editing States</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/accepting-edits">Accepting Edits</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/deleting-todos">Deleting a Model</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/adding-child-routes">Adding Child Routes</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/show-only-incomplete-todos">Transitioning to Show Only Incomplete Todos</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/show-only-complete-todos">Transitioning to Show Only Complete Todos</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/show-all-todos-again">Transitioning back to Show All Todos</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/display-a-button-to-remove-completed-todos">Displaying a Button to Remove All Completed Todos</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/show-when-all-todos-are-complete">Indicating When All Todos Are Complete</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/toggle-all-todos">Toggling All Todos Between Complete and Incomplete</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/using-other-adapters">Replacing the Fixture Adapter with Another Adapter</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/getting-ember">Getting Ember</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/getting-ember">Getting Ember</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/concepts/core-concepts">Concepts</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/concepts/core-concepts">Core Concepts</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/concepts/naming-conventions">Naming Conventions</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/object-model/classes-and-instances">The Object Model</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/object-model/classes-and-instances">Classes and Instances</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/object-model/computed-properties">Computed Properties</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/object-model/computed-properties-and-aggregate-data">Computed Properties and Aggregate Data with @each</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/object-model/observers">Observers</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/object-model/bindings">Bindings</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/object-model/reopening-classes-and-instances">Reopening Classes and Instances</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/object-model/what-do-i-use-when">Bindings, Observers, Computed Properties: What Do I Use When?</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/application">Application</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/application">Introduction</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/templates/the-application-template">Templates</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/templates/the-application-template">The Application Template</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/handlebars-basics">Handlebars Basics</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/conditionals">Conditionals</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/displaying-a-list-of-items">Displaying a List of Items</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/changing-scope">Changing Scope</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/binding-element-attributes">Binding Element Attributes</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/binding-element-class-names">Binding Element Class Names</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/links">Links</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/actions">Actions</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/input-helpers">Input Helpers</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/rendering-with-helpers">Rendering with Helpers</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/writing-helpers">Writing Helpers</a>
            </li>
          </ol></li>
          <li class="level-1 selected">
            <a href="/guides/routing">Routing</a>
            <ol class='selected'>
        
            <li class="level-3">
              <a href="/guides/routing">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/defining-your-routes">Defining Your Routes</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/generated-objects">Generated Objects</a>
            </li>
          
            <li class="level-3 sub-selected">
              <a href="/guides/routing/specifying-a-routes-model">Specifying a Route's Model</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/setting-up-a-controller">Setting Up a Controller</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/rendering-a-template">Rendering a Template</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/redirection">Redirecting</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/specifying-the-location-api">Specifying the URL Type</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/query-params">Query Parameters</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/asynchronous-routing">Asynchronous Routing</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/loading-and-error-substates">Loading / Error Substates</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/preventing-and-retrying-transitions">Preventing and Retrying Transitions</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/components">Components</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/components">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/components/defining-a-component">Defining a Component</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/components/passing-properties-to-a-component">Passing Properties to a Component</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/components/wrapping-content-in-a-component">Wrapping Content in a Component</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/components/customizing-a-components-element">Customizing a Component's Element</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/components/handling-user-interaction-with-actions">Handling User Interaction with Actions</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/components/sending-actions-from-components-to-your-application">Sending Actions from Components to Your Application</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/controllers">Controllers</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/controllers">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/controllers/representing-a-single-model-with-objectcontroller">Representing a Single Model with ObjectController</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/controllers/representing-multiple-models-with-arraycontroller">Representing Multiple Models with ArrayController</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/controllers/dependencies-between-controllers">Managing Dependencies Between Controllers</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/models">Models</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/models">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/models/defining-models">Defining Models</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/models/creating-and-deleting-records">Creating and Deleting Records</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/models/pushing-records-into-the-store">Pushing Records into the Store</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/models/persisting-records">Persisting Records</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/models/finding-records">Finding Records</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/models/working-with-records">Working with Records</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/models/connecting-to-an-http-server">Connecting to an HTTP Server</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/models/handling-metadata">Handling Metadata</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/models/frequently-asked-questions">Frequently Asked Questions</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/views">Views</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/views">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/views/defining-a-view">Defining a View</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/views/handling-events">Handling Events</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/views/inserting-views-in-templates">Inserting Views in Templates</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/views/adding-layouts-to-views">Adding Layouts to Views</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/views/customizing-a-views-element">Customizing a View's Element</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/views/built-in-views">Built-in Views</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/views/manually-managing-view-hierarchy">Manually Managing View Hierarchy</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/enumerables">Enumerables</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/enumerables">Introduction</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/testing/integration">Testing</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/testing/integration">Integration Testing</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/configuring-ember/disabling-prototype-extensions">Configuring Ember.js</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/configuring-ember/disabling-prototype-extensions">Disabling Prototype Extensions</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/configuring-ember/embedding-applications">Embedding Applications</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/configuring-ember/feature-flags">Feature Flags</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/cookbook">Cookbook</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/cookbook">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/contributing">Contributing</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/user_interface_and_interaction">User Interface and Interaction</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/event_handling_and_data_binding">Event Handling & Data Binding</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/helpers_and_components">Helpers & Components</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/working_with_objects">Working with Objects</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/understanding-ember/the-view-layer">Understanding Ember.js</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/understanding-ember/the-view-layer">The View Layer</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/understanding-ember/managing-asynchrony">Managing Asynchrony</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/understanding-ember/keeping-templates-up-to-date">Keeping Templates Up-to-Date</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/understanding-ember/debugging">Debugging</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/contributing/adding-new-features">Contributing to Ember.js</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/contributing/adding-new-features">Adding New Features</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/contributing/repositories">Repositories</a>
            </li>
          </ol></li></ol>
  
          <div id="back-to-top"><a id="back-top-top" href="#">&#11014; Back to Top</a></div>
        </div>
      
      <div id="content" class="has-sidebar">
          
  

  
  <div class="chapter">
    
        <h1>Specifying a Route's Model
          <a href="https://github.com/emberjs/website/tree/master/source/guides/routing/specifying-a-routes-model.md" target="_blank" class="edit-page icon-pencil">Edit Page</a>
        </h1>
      
    <hr>
    <p>Templates in your application are backed by models. But how do templates
know which model they should display?</p>

<p>For example, if you have a <code>photos</code> template, how does it know which
model to render?</p>

<p>This is one of the jobs of an <code>Ember.Route</code>. You can tell a template
which model it should render by defining a route with the same name as
the template, and implementing its <code>model</code> hook.</p>

<p>For example, to provide some model data to the <code>photos</code> template, we
would define an <code>App.PhotosRoute</code> object:</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
</pre></td>
  <td class="code"><pre>App.PhotosRoute = Ember.Route.extend({
  <span class="function">model</span>: <span class="keyword">function</span>() {
    <span class="keyword">return</span> [{
      <span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tomster</span><span class="delimiter">&quot;</span></span>,
      <span class="key">url</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http://emberjs.com/images/about/ember-productivity-sm.png</span><span class="delimiter">&quot;</span></span>
    }, {
      <span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Eiffel Tower</span><span class="delimiter">&quot;</span></span>,
      <span class="key">url</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http://emberjs.com/images/about/ember-structure-sm.png</span><span class="delimiter">&quot;</span></span>
    }];
  }
});
</pre></td>
</tr></table>
</div></div>
<p><a class="jsbin-embed" href="http://jsbin.com/oLUTEd/1/embed?js">JS Bin</a><script src="http://static.jsbin.com/js/embed.js"></script></p>
<h3 class='anchorable-toc' id='toc_asynchronously-loading-models'>Asynchronously Loading Models</h3>
<p>In the above example, the model data was returned synchronously from the
<code>model</code> hook. This means that the data was available immediately and
your application did not need to wait for it to load, in this case
because we immediately returned an array of hardcoded data.</p>

<p>Of course, this is not always realistic. Usually, the data will not be
available synchronously, but instead must be loaded asynchronously over
the network. For example, we may want to retrieve the list of photos
from a JSON API available on our server.</p>

<p>In cases where data is available asynchronously, you can just return a
promise from the <code>model</code> hook, and Ember will wait until that promise is
resolved before rendering the template.</p>

<p>If you&#39;re unfamiliar with promises, the basic idea is that they are
objects that represent eventual values. For example, if you use jQuery&#39;s
<code>getJSON()</code> method, it will return a promise for the JSON that is
eventually returned over the network. Ember uses this promise object to
know when it has enough data to continue rendering.</p>

<p>For more about promises, see <a href="/guides/routing/asynchronous-routing/#toc_a-word-on-promises">A Word on
Promises</a>
in the Asynchronous Routing guide.</p>

<p>Let&#39;s look at an example in action. Here&#39;s a route that loads the most
recent pull requests sent to Ember.js on GitHub:</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>App.PullRequestsRoute = Ember.Route.extend({
  <span class="function">model</span>: <span class="keyword">function</span>() {
    <span class="keyword">return</span> Ember.<span class="predefined">$</span>.getJSON(<span class="string"><span class="delimiter">'</span><span class="content">https://api.github.com/repos/emberjs/ember.js/pulls</span><span class="delimiter">'</span></span>);
  }
});
</pre></td>
</tr></table>
</div></div>
<p>While this example looks like it&#39;s synchronous, making it easy to read
and reason about, it&#39;s actually completely asynchronous. That&#39;s because
jQuery&#39;s <code>getJSON()</code> method returns a promise. Ember will detect the
fact that you&#39;ve returned a promise from the <code>model</code> hook, and wait
until that promise resolves to render the <code>pullRequest</code> template.</p>

<p>(For more information on jQuery&#39;s XHR functionality, see
<a href="http://api.jquery.com/jQuery.ajax/">jQuery.ajax</a> in the jQuery
documentation.)</p>

<p>Because Ember supports promises, it can work with any persistence
library that uses them as part of its public API. You can also use many
of the conveniences built in to promises to make your code even nicer.</p>

<p>For example, imagine if we wanted to modify the above example so that
the template only displayed the three most recent pull requests. We can
rely on promise chaining to modify the data returned from the JSON
request before it gets passed to the template:</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre>App.PullRequestsRoute = Ember.Route.extend({
  <span class="function">model</span>: <span class="keyword">function</span>() {
    <span class="keyword">var</span> url = <span class="string"><span class="delimiter">'</span><span class="content">https://api.github.com/repos/emberjs/ember.js/pulls</span><span class="delimiter">'</span></span>;
    <span class="keyword">return</span> Ember.<span class="predefined">$</span>.getJSON(url).then(<span class="keyword">function</span>(data) {
      <span class="keyword">return</span> data.splice(<span class="integer">0</span>, <span class="integer">3</span>);
    });
  }
});
</pre></td>
</tr></table>
</div></div><h3 class='anchorable-toc' id='toc_setting-up-controllers-with-the-model'>Setting Up Controllers with the Model</h3>
<p>So what actually happens with the value you return from the <code>model</code>
hook?</p>

<p>By default, the value returned from your <code>model</code> hook will be assigned
to the <code>model</code> property of the associated controller. For example, if your
<code>App.PostsRoute</code> returns an object from its <code>model</code> hook, that object
will be set as the <code>model</code> property of the <code>App.PostsController</code>.</p>

<p>(This, under the hood, is how templates know which model to render: they
look at their associated controller&#39;s <code>model</code> property. For example, the
<code>photos</code> template will render whatever the <code>App.PhotosController</code>&#39;s
<code>model</code> property is set to.)</p>

<p>See the <a href="/guides/routing/setting-up-a-controller">Setting Up a Controller guide</a> to learn how to change this
default behavior. Note that if you override the default behavior and do
not set the <code>model</code> property on a controller, your template will not
have any data to render!</p>
<h3 class='anchorable-toc' id='toc_dynamic-models'>Dynamic Models</h3>
<p>Some routes always display the same model. For example, the <code>/photos</code>
route will always display the same list of photos available in the
application. If your user leaves this route and comes back later, the
model does not change.</p>

<p>However, you will often have a route whose model will change depending
on user interaction. For example, imagine a photo viewer app. The
<code>/photos</code> route will render the <code>photos</code> template with the list of
photos as the model, which never changes. But when the user clicks on a
particular photo, we want to display that model with the <code>photo</code>
template. If the user goes back and clicks on a different photo, we want
to display the <code>photo</code> template again, this time with a different model.</p>

<p>In cases like this, it&#39;s important that we include some information in
the URL about not only which template to display, but also which model.</p>

<p>In Ember, this is accomplished by defining routes with <em>dynamic segments</em>.</p>

<p>A dynamic segment is a part of the URL that is filled in by the current
model&#39;s ID. Dynamic segments always start with a colon (<code>:</code>). Our photo
example might have its <code>photo</code> route defined like this:</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre>App.Router.map(<span class="keyword">function</span>() {
  <span class="local-variable">this</span>.resource(<span class="string"><span class="delimiter">'</span><span class="content">photo</span><span class="delimiter">'</span></span>, { <span class="key">path</span>: <span class="string"><span class="delimiter">'</span><span class="content">/photos/:photo_id</span><span class="delimiter">'</span></span> });
});
</pre></td>
</tr></table>
</div></div>
<p>In this example, the <code>photo</code> route has a dynamic segment <code>:photo_id</code>.
When the user goes to the <code>photo</code> route to display a particular photo
model (usually via the <code>{{link-to}}</code> helper), that model&#39;s ID will be
placed into the URL automatically.</p>

<p>See <a href="/guides/templates/links">Links</a> for more information about linking
to a route with a model using the <code>{{link-to}}</code> helper.</p>

<p>For example, if you transitioned to the <code>photo</code> route with a model whose
<code>id</code> property was <code>47</code>, the URL in the user&#39;s browser would be updated
to:</p>
<div class="highlight  "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>/photos/47
</pre></td>
</tr></table>
</div></div>
<p>What happens if the user visits your application directly with a URL
that contains a dynamic segment? For example, they might reload the
page, or send the link to a friend, who clicks on it. At that point,
because we are starting the application up from scratch, the actual
JavaScript model object to display has been lost; all we have is the ID
from the URL.</p>

<p>Luckily, Ember will extract any dynamic segments from the URL for
you and pass them as a hash to the <code>model</code> hook as the first argument:</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre>App.Router.map(<span class="keyword">function</span>() {
  <span class="local-variable">this</span>.resource(<span class="string"><span class="delimiter">'</span><span class="content">photo</span><span class="delimiter">'</span></span>, { <span class="key">path</span>: <span class="string"><span class="delimiter">'</span><span class="content">/photos/:photo_id</span><span class="delimiter">'</span></span> });
});

App.PhotoRoute = Ember.Route.extend({
  <span class="function">model</span>: <span class="keyword">function</span>(params) {
    <span class="keyword">return</span> Ember.<span class="predefined">$</span>.getJSON(<span class="string"><span class="delimiter">'</span><span class="content">/photos/</span><span class="delimiter">'</span></span>+params.photo_id);
  }
});
</pre></td>
</tr></table>
</div></div>
<p>In the <code>model</code> hook for routes with dynamic segments, it&#39;s your job to
turn the ID (something like <code>47</code> or <code>post-slug</code>) into a model that can
be rendered by the route&#39;s template. In the above example, we use the
photo&#39;s ID (<code>params.photo_id</code>) to construct a URL for the JSON
representation of that photo. Once we have the URL, we use jQuery to
return a promise for the JSON model data.</p>

<p>Note: A route with a dynamic segment will only have its <code>model</code> hook called
when it is entered via the URL. If the route is entered through a transition
(e.g. when using the <a href="/guides/templates/links">link-to</a> Handlebars helper), then a model context is
already provided and the hook is not executed. Routes without dynamic segments
will always execute the model hook.</p>
<h3 class='anchorable-toc' id='toc_ember-data'>Ember Data</h3>
<p>Many Ember developers use a model library to make finding and saving
records easier than manually managing Ajax calls. In particular, using a
model library allows you to cache records that have been loaded,
significantly improving the performance of your application.</p>

<p>One popular model library built for Ember is Ember Data. To learn more
about using Ember Data to manage your models, see the
<a href="/guides/models">Models</a> guide.</p>

    
      <footer>
        
          <a class="previous-guide" href="/guides/routing/generated-objects">
            ← Generated Objects
          </a>
         
        <a class="next-guide" href="/guides/routing/setting-up-a-controller">
          Setting Up a Controller →
        </a>
      
      </footer>
      
  </div>

      </div>
    </div>

    <div id="footer">
      <div id="footer-wrapper">
        <div class="info">
          Copyright 2014 <a href="http://tilde.io">Tilde Inc.</a><br>
          Design by <a href="http://www.heropixel.com">HeroPixel</a></br>
          <a href="/team">Core Team</a> | <a href="/sponsors">Project Sponsors</a>
        </div>
        <div class="statement">Ember.js is free, open source and always will be.</div>
        <div class="links">
          <a class="twitter" href="http://twitter.com/emberjs">
            <i class="icon-twitter"></i><span>Twitter</span>
          </a>
          <a class="github" href="https://github.com/emberjs/ember.js">
            <i class="icon-github"></i><span>GitHub</span>
          </a>
          <a class="googleplus" href="https://plus.google.com/communities/106387049790387471205">
            <i class="icon-gplus"></i><span>Google+</span>
          </a>
        </div>
      </div>
    </div>
  </body>
</html>
